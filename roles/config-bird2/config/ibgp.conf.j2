# Generated by Ansible
{% for host in groups['dn42routers'] %}
{% if host != inventory_hostname %}
{% set nodedata = hostvars[host] %}
protocol bgp ibgp_{{ nodedata['shortname'] | replace("-", "_") }} {
    local as {{ ownas }};
    neighbor {{ nodedata['ownip6'] }} as {{ ownas }};
    source address {{ ownip6 }};

    ipv4 {
        import where source = RTS_BGP && is_valid_network() && !is_self_net();
        export where source = RTS_BGP && is_valid_network() && !is_self_net();
        next hop address {{ ownip }};
        next hop self;
    };

    ipv6 {
        import where source = RTS_BGP && is_valid_network_v6() && !is_self_net_v6();
        export where source = RTS_BGP && is_valid_network_v6() && !is_self_net_v6();
        next hop address {{ ownip6 }};
        next hop self;
    };
}
{% endif %}
{% endfor %}
