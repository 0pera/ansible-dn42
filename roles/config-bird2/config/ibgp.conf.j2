# Generated by Ansible
{% for host in ansible_play_hosts_all %}
{% if host != inventory_hostname %}
{% set nodedata = hostvars[host] %}
protocol bgp ibgp_{{ nodedata['shortname'] | replace("-", "_") }} {
    local as {{ ownas }};
    path metric 1;
    igp metric 1;
    neighbor {{ nodedata['ownip6'] }} as {{ ownas }};
    direct;

    ipv4 {
        next hop self;
        gateway direct;
        import all;
        export all;
    };

    ipv6 {
        next hop self;
        gateway direct;
        import all;
        export all;
    };
}
{% endif %}
{% endfor %}
