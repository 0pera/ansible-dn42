# Custom filters for AS4242421080

function prefer_direct_peers() {
    # Prefer direct paths to peers, i.e. if neighbor = source
    if (source = RTS_BGP && bgp_path.len > 0 && bgp_path.first = bgp_path.last) then {
        print "Adding direct route for ", net, " from AS ", bgp_path.first;
        bgp_local_pref = 500;
    }
};

function send_ibgp_cost_as_med() {
    # Send virtual igp_metric (defined in ibgp.conf) as MED to neighbouring routers
    if (source = RTS_BGP) then {
        if igp_metric > 0 then {
            bgp_med = igp_metric;
        } else {
            bgp_med = 0;
        }
    }
};

function import_jlu5_route_tweaks() {
    prefer_direct_peers();
};

function export_jlu5_route_tweaks() {
    send_ibgp_cost_as_med();
};
