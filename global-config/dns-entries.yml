# Custom DNS entries. This is read by scripts/make-dns-entries.py to generate Bind-style zones under dns-zones/
dns_records:
  "{{ dns_domain }}":
    # Public-facing
    "lg":
      type: ansible_host_alias
      target: dn42-us-sea02.jlu5.com
    "ping":
      type: CNAME
      target: 01.yvrlab

    # Internal services
    "nightfall":
      type: A
      target: 172.22.108.45
    "mediactr":
      type: host_record
      ip4: 172.22.108.25
    "music":
      type: CNAME
      target: mediactr
    "jf":
      type: CNAME
      target: 01.yvrlab

    # Hosts to create forward and reverse entries for
    "01.yvrlab":
      type: host_record
      ip4: 172.22.108.1
      ip6: fd86:bad:11b7:a::1
    "02.yvrlab":
      type: host_record
      ip4: 172.22.108.18
      ip6: fd86:bad:11b7:a::2
    "ns":
      type: host_record
      ip4: "{{ dummy_interfaces.anycast_auth_dns.ip4[0] }}"
      ip6: "{{ dummy_interfaces.anycast_auth_dns.ip6[0] }}"
    "dns":
      type: host_record
      ip4: "{{ dummy_interfaces.anycast_recursors.ip4[0] }}"
      ip6: "{{ dummy_interfaces.anycast_recursors.ip6[0] }}"

    # client nodes and /31 pairs
    "mobi1.clients":
      type: host_record
      ip4: 172.22.108.16
    "mobi1-ptp.us-sea02":
      type: host_record
      ip4: 172.22.108.17
    "mobi2.clients":
      type: host_record
      ip4: 172.22.108.19
    "urepo-mirror-master":
      type: host_record
      ip4: 172.22.108.26
    "urepo-mirror-master-ptp.us-nyc02":
      type: host_record
      ip4: 172.22.108.27
    "shypre-1.clients":
      type: host_record
      ip4: 172.22.108.28
    "silverthing-ptp.us-sea02":
      type: host_record
      ip4: 172.22.108.30
    "silverthing.clients":
      type: host_record
      ip4: 172.22.108.31

  "jlu5.dn42":
    # CNAMEs to new domain
    "lg":
      type: CNAME
      target: lg.highdef.dn42.
    "ping":
      type: CNAME
      target: ping.highdef.dn42.

dns_generate_records:
  "highdef.dn42":
    - start: 2
      end: 15
      template: "ct-${0,2,d}.yvrlab"  # pad 2 to IP section
      rtype: A
      target: "172.22.108.$"
  "172.22.108.0/26":
    - start: 2
      end: 15
      template: "$"
      rtype: PTR
      target: "ct-${0,2,d}.yvrlab.highdef.dn42."
