# Custom DNS entries. This is read by scripts/make-dns-entries.py to generate Bind-style zones under dns-zones/
dns_records:
  "{{ dns_domain }}":
    # Public-facing
    "lg":
      type: ansible_host_alias
      target: dn42-us-sea02.jlu5.com
    "ping":
      type: host_record
      ip4: 172.22.108.3
      ip6: fd86:bad:11b7:aaaa:38c2:3ff:fe0b:5860
    "ping-chi":
      type: host_record
      ip4: 172.22.108.46
      ip6: fd86:bad:11b7:20::46

    "ping-sjc":
      type: ansible_host_alias
      target: dn42-us-sjc01.jlu5.com
    "ping-lax":
      type: ansible_host_alias
      target: dn42-us-lax01.jlu5.com
    "ping-ams":
      type: ansible_host_alias
      target: dn42-nl-ams02.jlu5.com
    "ping-nbg":
      type: ansible_host_alias
      target: dn42-de-nbg01.jlu5.com
    "ping-tyo":
      type: ansible_host_alias
      target: dn42-jp-tyo01.jlu5.com
    "ping-yvr001":
      type: ansible_host_alias
      target: yvr001.jlu5.com

    # DNS services
    "ns":
      type: host_record
      ip4: "{{ dummy_interfaces.anycast_auth_dns.ip4[0] }}"
      ip6: "{{ dummy_interfaces.anycast_auth_dns.ip6[0] }}"
    "dns":
      type: host_record
      ip4: "{{ dummy_interfaces.anycast_recursors.ip4[0] }}"
      ip6: "{{ dummy_interfaces.anycast_recursors.ip6[0] }}"

    # Internal services
    "nightfall":
      type: A
      target: 172.22.108.45
    "mediactr":
      type: host_record
      ip4: 172.22.108.25
    "music":
      type: CNAME
      target: mediactr
    "jf":
      type: A
      target: 172.22.108.2

    # client nodes and /31 pairs
    "mobi1.clients":
      type: host_record
      ip4: 172.22.108.16
    "mobi1-ptp.us-sea02":
      type: host_record
      ip4: 172.22.108.17
    "mobi2.clients":
      type: host_record
      ip4: 172.22.108.19
    "shypre-1.clients":
      type: host_record
      ip4: 172.22.108.28
    "silverthing-ptp.us-sea02":
      type: host_record
      ip4: 172.22.108.30
    "silverthing.clients":
      type: host_record
      ip4: 172.22.108.31
    "GW.yvrlab":
      type: host_record
      ip4: 172.22.108.1
      ip6: fd86:bad:11b7:aaaa::1

  "jlu5.dn42":
    # CNAMEs to new domain
    "lg":
      type: CNAME
      target: lg.highdef.dn42.
    "ping":
      type: CNAME
      target: ping.highdef.dn42.

dns_generate_records:
  "highdef.dn42":
    - start: 2
      end: 15
      template: "${0,1,d}.yvrlab"  # pad 2 to IP section
      rtype: A
      target: "172.22.108.$"
  "172.22.108.0/26":
    - start: 2
      end: 15
      template: "$"
      rtype: PTR
      target: "${0,2,d}.yvrlab.highdef.dn42."
